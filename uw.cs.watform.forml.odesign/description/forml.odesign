<?xml version="1.0" encoding="UTF-8"?>
<description:Group xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:description="http://www.eclipse.org/sirius/description/1.1.0" xmlns:description_1="http://www.eclipse.org/sirius/diagram/description/1.1.0" xmlns:properties="http://www.eclipse.org/sirius/properties/1.0.0" xmlns:style="http://www.eclipse.org/sirius/diagram/description/style/1.1.0" xmlns:tool="http://www.eclipse.org/sirius/description/tool/1.1.0" xmlns:tool_1="http://www.eclipse.org/sirius/diagram/description/tool/1.1.0" xmlns:validation="http://www.eclipse.org/sirius/description/validation/1.1.0" name="forml" version="12.0.0.2017041100">
  <ownedViewpoints name="Design" label="Forml Design Description" modelFileExtension="forml" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FORML.png">
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="FeatureModule_Diagram" label="FeatureModule Diagram" titleExpression="[thisEObject.featureref.name+': Feature Module'/]" initialisation="true" domainClass="forml.FeatureModule" preconditionExpression="service:doesDashboardExists" enablePopupBars="true">
      <metamodel href="../../uw.cs.watform.forml/model/generated/Forml.ecore#/"/>
      <validationSet name="FeatureModuleValidation">
        <ownedRules xsi:type="validation:SemanticValidationRule" name="NoStateWithoutTransition" level="ERROR" message="The state is not connected to any other state via a transition..." targetClass="forml.State">
          <audits auditExpression="service:validate_StatesWithoutTransitions()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="TransitionsWithoutTrigerringEvents" level="ERROR" message="The transition has no trigerring event or guard condition ..." targetClass="forml.Transition">
          <audits auditExpression="service:validate_TransitionsWithoutTrigerringEvents()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="AllTheInitialStatesHaveRefnode" level="ERROR" message="The initial state is not connected to a reference state ..." targetClass="forml.InitState">
          <audits auditExpression="service:validate_AllInitStatesHaveRefNode()"/>
          <fixes name="Add a new state and refer to it">
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject.eContainer()/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.State" referenceName="states" variableName="refinstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:populateStateName()"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:setRefStateForInitState(refinstance)"/>
              </firstModelOperations>
            </initialOperation>
          </fixes>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="RegionsWithoutinitialState" level="ERROR" message="The region has no initial state ..." targetClass="forml.Region">
          <audits auditExpression="service:validate_AllRegionsHaveInitialState()"/>
          <fixes name="Add initial state to the region">
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.State" referenceName="states" variableName="refinstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:populateStateName()"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.InitState" referenceName="init" variableName="initInstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:initInstance">
                    <subModelOperations xsi:type="tool:SetValue" featureName="stateref" valueExpression="var:refinstance"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </fixes>
        </ownedRules>
      </validationSet>
      <layout xsi:type="description_1:CompositeLayout" padding="70" direction="LeftToRight"/>
      <defaultLayer name="Default">
        <edgeMappings name="transitionEdge" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='delete_Transition']" semanticElements="[thisEObject.eContents(forml::Region)/]" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='OpenSpecificationEditor']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']/@subContainerMappings[name='SM_Region']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']/@subContainerMappings[name='SM_Region']" targetFinderExpression="feature:dst" sourceFinderExpression="feature:src" domainClass="forml.Transition" useDomainElement="true" reconnections="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='reconnectStatesTarget'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='reconnectStatesSource']">
          <style routingStyle="manhattan">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <centerLabelStyleDescription showIcon="false" labelExpression="service:populateTransitionLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
        <edgeMappings name="initTrans" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subNodeMappings[name='initialState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']/@subContainerMappings[name='SM_Region']/@subNodeMappings[name='initialStateInRegions']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']" targetFinderExpression="[thisEObject.stateref/]" reconnections="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='reconnectInitState']">
          <style>
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <centerLabelStyleDescription showIcon="false">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
        <containerMappings name="StateMashineContainer" semanticCandidatesExpression="[statemachine/]" domainClass="forml.StateMachine" childrenPresentation="VerticalStack">
          <subContainerMappings name="SM_StateMachineMainRegion" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='deleteStatesOrRegions']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='editName']" semanticCandidatesExpression="[self.regions/]" domainClass="forml.Region" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dropStatesBetweenRegions']">
            <subNodeMappings name="initialState" semanticCandidatesExpression="feature:init" domainClass="forml.InitState">
              <style xsi:type="style:EllipseNodeDescription" showIcon="false" labelExpression="" hideLabelByDefault="true" sizeComputationExpression="-1" horizontalDiameterComputationExpression="1" verticalDiameterComputationExpression="1">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subContainerMappings name="SM_SimpleState" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='deleteStatesOrRegions']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='editName']" semanticCandidatesExpression="[states/]" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dblClickOpenFragmentDiagram']" domainClass="forml.State" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@additionalLayers[name='Class%20Layer']/@toolSections.0/@ownedTools[name='dropMessageToState']" reusedNodeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer']/@subNodeMappings[name='FeatureAttNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']" childrenPresentation="VerticalStack">
              <subContainerMappings name="SM_Region" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='deleteStatesOrRegions']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='editName']" semanticCandidatesExpression="[regions/]" domainClass="forml.Region" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dropStatesBetweenRegions']" reusedContainerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']">
                <subNodeMappings name="initialStateInRegions" semanticCandidatesExpression="feature:init" domainClass="forml.InitState">
                  <style xsi:type="style:EllipseNodeDescription" hideLabelByDefault="true" sizeComputationExpression="-1" horizontalDiameterComputationExpression="1" verticalDiameterComputationExpression="1">
                    <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                    <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                    <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                  </style>
                </subNodeMappings>
                <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" labelSize="7" showIcon="false" labelAlignment="LEFT" backgroundStyle="Liquid">
                  <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                  <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                  <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
                  <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_gray']"/>
                </style>
              </subContainerMappings>
              <style xsi:type="style:FlatContainerStyleDescription" arcWidth="5" arcHeight="5" borderSizeComputationExpression="1" showIcon="false" roundedCorner="true" backgroundStyle="GradientTopToBottom" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='SimpleStateColor']">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelFormat>bold</labelFormat>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
              </style>
            </subContainerMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" labelSize="7" showIcon="false" labelExpression="[name/]" labelAlignment="LEFT" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='StateMachineBackGround']">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <style xsi:type="style:FlatContainerStyleDescription" labelSize="9" showIcon="false" labelExpression="[self.eContainer(forml::FeatureModule).featureref.name/]" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='StateMachineBackGround']">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
          </style>
        </containerMappings>
        <toolSections name="NodesFM">
          <ownedTools xsi:type="tool_1:NodeCreationDescription" name="createInitialStateMachine" label="Initial State" precondition="[container.eContents(forml::InitState)->size()=0/]" nodeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subNodeMappings[name='initialState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']/@subContainerMappings[name='SM_Region']/@subNodeMappings[name='initialStateInRegions']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_InitialPseudoState.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createInitState()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createStateNode" label="State" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_NormalState.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createNewState()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createRegion" label="Region" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']/@subContainerMappings[name='SM_Region'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_RegionState.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createNewRegion()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="StatesRelationshipsFM" label="Relationships">
          <ownedTools xsi:type="tool_1:EdgeCreationDescription" name="setTransition" label="Transition" forceRefresh="true" elementsToSelect="[thisEObject/]" edgeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@edgeMappings[name='transitionEdge']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_StateTransition.gif">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateNewTransition(source,target)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectStatesTarget" forceRefresh="true">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:SetValue" featureName="dst" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectStatesSource" forceRefresh="true" reconnectionKind="RECONNECT_SOURCE">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:SetValue" featureName="src" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:PaneBasedSelectionWizardDescription" name="selectPriorityTrans" label="Prioritization" precondition="[self.oclIsTypeOf(forml::Transition) /]" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Priority.gif" windowImagePath="/uw.cs.watform.forml.odesign/images/Icons/icon_Priority.gif" message="Select the transitions that the selected transitoin should have priority over:" candidatesExpression="service:get_Available_TransitionsForStateMachine()" preSelectedCandidatesExpression="service:get_AlreadySelected_Transitions()">
            <element name="element"/>
            <containerView name="containerView"/>
            <container name="container"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
                <subModelOperations xsi:type="tool:Unset" featureName="priority"/>
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Priority" referenceName="priority" variableName="prInstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="prInstance">
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.TransList" referenceName="translist" variableName="translistinstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:translistinstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="transitions" valueExpression="var:element"/>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </subModelOperations>
                <subModelOperations xsi:type="tool:If" conditionExpression="[thisEObject.oclAsType(forml::Transition).priority.translist->size()=0/]">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject.oclAsType(forml::Transition).priority/]">
                    <subModelOperations xsi:type="tool:RemoveElement"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectInitState" forceRefresh="true">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:SetValue" featureName="stateref" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
        </toolSections>
        <toolSections name="ClickableActionsFM">
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="OpenSpecificationEditor" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@edgeMappings[name='transitionEdge']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowSetTransitionDialog()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ExternalJavaAction" name="OpenEmbeddedEditorForTransition" label="Open Transition Editor" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]" id="uw.cs.watform.forml.extensions.Ext_OpenEmbeddedEditor"/>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="NavigateToXtextEditor" precondition="[false/]">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openTextEditor()"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="NavigateTo" label="Go To" forceRefresh="true">
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenDashBoard" label="Open DashBoard" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_Dashboard.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System)/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureClass" label="Open Feature Class" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_ClassDiagram.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System).worldmodel/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureModel" label="Open Feature Model" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModel.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System).worldmodel/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFrangment" label="Open Fragment Diagram" precondition="[thisEObject.oclIsTypeOf(forml::State) and (not (thisEObject.eContainer(forml::BehaviourModel).featuremodules.fragments.fragmentType->select(r|r.state.ref=thisEObject).eContainer(forml::FeatureModule))->isEmpty())/]" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:getAssociatedFragments()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="dblClickOpenFragmentDiagram" label="Open Fragment Diagram" precondition="[(not (thisEObject.eContainer(forml::BehaviourModel).featuremodules.fragments.fragmentType->select(r|r.state.ref=thisEObject).eContainer(forml::FeatureModule))->isEmpty())/]" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:If" conditionExpression="service:isCtrlPressed()">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:findFragmentFMtoNavigateFromState()">
                  <subModelOperations xsi:type="tool_1:Navigation" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropStatesBetweenRegions" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[newSemanticContainer/]">
                <subModelOperations xsi:type="tool:SetValue" featureName="states" valueExpression="[newSemanticContainer.oclAsType(forml::Region).states->append(element)/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SwapTransitionRoles" label="Swap Transition Roles" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]" forceRefresh="true">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:swapTransitionRoles()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="CreateDiagram" label="Create Diagram" forceRefresh="true">
            <menuItemDescription xsi:type="tool:OperationAction" name="FragmentOut" label="Fragment Diagram" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif">
              <view name="views">
                <subVariables xsi:type="tool:AcceleoVariable" name="SelectedFeature" computationExpression="service:selectFeatureWizard()"/>
              </view>
              <initialOperation>
                <firstModelOperations xsi:type="tool:If" conditionExpression="[SelectedFeature.oclIsTypeOf(forml::Feature)/]">
                  <subModelOperations xsi:type="tool:For" expression="[thisEObject/]" iteratorName="tg">
                    <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[SelectedFeature.oclAsType(forml::Feature).eContainer(forml::System)/]">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[SelectedFeature.eContainer(forml::System).behaviourmodel/]">
                        <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.FeatureModule" referenceName="featuremodules" variableName="FMInstance">
                          <subModelOperations xsi:type="tool:SetValue" featureName="featureref" valueExpression="var:SelectedFeature"/>
                          <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:FMInstance">
                            <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Fragment" referenceName="fragments" variableName="SMInstance">
                              <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['SM_'+SelectedFeature.oclAsType(forml::Feature).name/]"/>
                              <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:SMInstance">
                                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.FragmentType" referenceName="fragmentType" variableName="Frinstance">
                                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:Frinstance"/>
                                  <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.StateContext" referenceName="state" variableName="stateContextInstance">
                                    <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:stateContextInstance">
                                      <subModelOperations xsi:type="tool:SetValue" featureName="ref" valueExpression="[tg/]"/>
                                      <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Region" referenceName="regions" variableName="reginstance">
                                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['main'/]"/>
                                        <subModelOperations xsi:type="tool:ChangeContext" browseExpression="reginstance">
                                          <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.State" referenceName="states" variableName="refinstance">
                                            <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="aql:'S0'"/>
                                          </subModelOperations>
                                          <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.InitState" referenceName="init" variableName="initInstance">
                                            <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:initInstance">
                                              <subModelOperations xsi:type="tool:SetValue" featureName="stateref" valueExpression="var:refinstance"/>
                                            </subModelOperations>
                                          </subModelOperations>
                                        </subModelOperations>
                                      </subModelOperations>
                                    </subModelOperations>
                                  </subModelOperations>
                                </subModelOperations>
                              </subModelOperations>
                            </subModelOperations>
                            <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                          </subModelOperations>
                        </subModelOperations>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SetTriggeringEvent" label="Set Triggering Event (Ctrl + Space)" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowTriggeringEventOperations()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SetGuard" label="Set Guard" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowSetGuardDialog()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SetWCAAction" label="Set Action (Ctrl + Alt + Space)" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowWCAActionOperations()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="OpenSpecificationFM" label="Open Specification" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowSetTransitionDialog()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editName" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:If" conditionExpression="[arg0.size()>0/]">
                <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="var:0"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteStatesOrRegions">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Delete_StatesOrRegions()">
                <subModelOperations xsi:type="tool:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="delete_Transition">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:RemoveElement"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <decorationDescriptionsSet>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="isFragmentExistsDiagram" position="NORTH_EAST" preconditionExpression="[thisEObject.oclIsTypeOf(forml::State) and (not (thisEObject.eContainer(forml::BehaviourModel).featuremodules.fragments.fragmentType->select(r|r.state.ref=thisEObject).eContainer(forml::FeatureModule))->isEmpty())/]" imageExpression="/uw.cs.watform.forml.odesign/images/Icons/icon_NavigateTo.gif" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@containerMappings[name='StateMashineContainer']/@subContainerMappings[name='SM_StateMachineMainRegion']/@subContainerMappings[name='SM_SimpleState']"/>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="transitionErrorDisplayDecorator" position="CENTER" imageExpression="/uw.cs.watform.forml.odesign/GUI/GUI/com/uwaterloo/cs/forml/odesign/res/icon_removeButton16.png"/>
        </decorationDescriptionsSet>
      </defaultLayer>
      <additionalLayers name="Constraints">
        <containerMappings name="FMConstraintsContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Constraints']/@toolSections.0/@ownedTools[name='deleteConstraints']" semanticCandidatesExpression="feature:constraints" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@additionalLayers[name='Constraints']/@toolSections.1/@ownedTools[name='OpenConstraintsEditor']" domainClass="forml.Constraint" childrenPresentation="List">
          <subNodeMappings name="Macro_Description" semanticCandidatesExpression="[eAllContents(forml::Macro)/]" domainClass="forml.Macro">
            <style xsi:type="style:BundledImageDescription" labelExpression="service:getConstraintsText()" labelAlignment="LEFT" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <subNodeMappings name="Pred_Description" semanticCandidatesExpression="[eAllContents(forml::Predicate)/]" domainClass="forml.Predicate">
            <style xsi:type="style:BundledImageDescription" labelExpression="service:getConstraintsText()" labelAlignment="LEFT" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" labelSize="11" showIcon="false" labelExpression="['Constraints'/]" roundedCorner="true" widthComputationExpression="20" heightComputationExpression="20" backgroundStyle="Liquid">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_orange']"/>
          </style>
        </containerMappings>
        <toolSections name="Constraints">
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createConstraintsContainer" label="Constraints" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@additionalLayers[name='Constraints']/@containerMappings[name='FMConstraintsContainer']">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[container/]">
                <subModelOperations xsi:type="tool:If" conditionExpression="[container.constraints.oclIsUndefined()/]">
                  <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Constraint" referenceName="constraints" variableName="constInstance"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool:ExternalJavaAction" name="OpenEmbeddedEditorforConstraints" label="Open Constraints Editor" precondition="[thisEObject.oclIsTypeOf(forml::Constraint)/]" id="uw.cs.watform.forml.extensions.Ext_OpenEmbeddedEditor"/>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="OpenConstraintsEditor" label="Open Constraints Editor" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@additionalLayers[name='Constraints']/@containerMappings[name='FMConstraintsContainer']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[element.oclAsType(forml::Constraint)/]">
                <subModelOperations xsi:type="tool:ExternalJavaActionCall" name="dbl_OpenEmbeddedEditorforConstraints" action="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@additionalLayers[name='Constraints']/@toolSections.1/@ownedTools[name='OpenEmbeddedEditorforConstraints']"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </additionalLayers>
      <additionalLayers name="Class Layer">
        <containerMappings xsi:type="description_1:ContainerMappingImport" name="import_FeatureClassContainer" semanticCandidatesExpression="[thisEObject.oclAsType(forml::FeatureModule).featureref/]" reusedContainerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']" childrenPresentation="VerticalStack" importedMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']"/>
        <toolSections name="import_FeatureClassTools" reusedTools="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditFeatureMessage'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditAttributeForEntityAndFeature'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='changeMsgType']/@menuItemDescription.0 //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='changeMsgType']/@menuItemDescription.1 //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='changeMsgType'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='openMsgEditDialog'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='switchControlAttribute'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']">
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropMessageToState" forceRefresh="true" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer']/@subNodeMappings[name='FeatureAttNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:DropFeatureObjectsToState(element)"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </additionalLayers>
    </ownedRepresentations>
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="Fragment_Diagram" label="Fragment Diagram" titleExpression="[thisEObject.featureref.name+': Fragmented Feature Module'/]" initialisation="true" domainClass="forml.FeatureModule" preconditionExpression="service:doesDashboardExists" enablePopupBars="true">
      <validationSet name="FragmentValidation">
        <ownedRules xsi:type="validation:SemanticValidationRule" name="NoStateWithoutTransition" level="ERROR" message="The state is not connected to any other state via a transition..." targetClass="forml.State">
          <audits auditExpression="service:validate_StatesWithoutTransitions()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="TransitionsWithoutTrigerringEvents" level="ERROR" message="The transition has no trigerring event or guard condition ..." targetClass="forml.Transition">
          <audits auditExpression="service:validate_TransitionsWithoutTrigerringEvents()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="AllTheInitialStatesHaveRefnode" level="ERROR" message="The initial state is not connected to a reference state ..." targetClass="forml.InitState">
          <audits auditExpression="service:validate_AllInitStatesHaveRefNode()"/>
          <fixes name="Add a new state and refer to it">
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject.eContainer()/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.State" referenceName="states" variableName="refinstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:populateStateName()"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:setRefStateForInitState(refinstance)"/>
              </firstModelOperations>
            </initialOperation>
          </fixes>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="RegionsWithoutinitialState" level="ERROR" message="The region has no initial state ..." targetClass="forml.Region">
          <audits auditExpression="service:validate_AllRegionsHaveInitialState()"/>
          <fixes name="Add initial state to the region">
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.State" referenceName="states" variableName="refinstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:populateStateName()"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.InitState" referenceName="init" variableName="initInstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:initInstance">
                    <subModelOperations xsi:type="tool:SetValue" featureName="stateref" valueExpression="var:refinstance"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </fixes>
        </ownedRules>
      </validationSet>
      <layout xsi:type="description_1:CompositeLayout" padding="70" direction="LeftToRight"/>
      <defaultLayer name="Default">
        <edgeMappings name="Frag_transitionEdge" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='delete_FragTransition']" semanticElements="[thisEObject.eContents(forml::Region)/]" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='OpenSpecificationEditor']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']/@subContainerMappings[name='Frag_Region']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']/@subContainerMappings[name='Frag_Region']" targetFinderExpression="feature:dst" sourceFinderExpression="feature:src" domainClass="forml.Transition" useDomainElement="true" reconnections="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='reconnectStatesTarget'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='reconnectStatesSource']">
          <style routingStyle="manhattan">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <centerLabelStyleDescription showIcon="false" labelExpression="service:populateTransitionLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
        <edgeMappings name="fragInitTrans" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subNodeMappings[name='Frag_initialState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']/@subContainerMappings[name='Frag_Region']/@subNodeMappings[name='Frag_initialStateInRegions']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']" targetFinderExpression="[thisEObject.stateref/]" reconnections="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='reconnectInitState']">
          <style>
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <centerLabelStyleDescription showIcon="false">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
        <containerMappings name="FragmentTypeContainer" semanticCandidatesExpression="[fragments.fragmentType.state/]" domainClass="forml.StateContext" childrenPresentation="VerticalStack">
          <subContainerMappings name="Frag_StateMachineMainRegion" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='deleteStatesOrRegions']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='editName']" semanticCandidatesExpression="[thisEObject.regions/]" domainClass="forml.Region" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dropStatesBetweenRegions']">
            <subNodeMappings name="Frag_initialState" semanticCandidatesExpression="feature:init" domainClass="forml.InitState">
              <style xsi:type="style:EllipseNodeDescription" showIcon="false" labelExpression="" hideLabelByDefault="true" sizeComputationExpression="-1" horizontalDiameterComputationExpression="2" verticalDiameterComputationExpression="2">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subContainerMappings name="Frag_SimpleState" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='deleteStatesOrRegions']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='editName']" semanticCandidatesExpression="[states/]" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dblClickOpenFragmentDiagram']" domainClass="forml.State" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@additionalLayers[name='Class%20Layer']/@toolSections.0/@ownedTools[name='dropMessageToState']" reusedNodeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer']/@subNodeMappings[name='FeatureAttNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']" childrenPresentation="VerticalStack">
              <subContainerMappings name="Frag_Region" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='deleteStatesOrRegions']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.3/@ownedTools[name='editName']" semanticCandidatesExpression="[regions/]" domainClass="forml.Region" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dropStatesBetweenRegions']" reusedContainerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']">
                <subNodeMappings name="Frag_initialStateInRegions" semanticCandidatesExpression="feature:init" domainClass="forml.InitState">
                  <style xsi:type="style:EllipseNodeDescription" hideLabelByDefault="true" sizeComputationExpression="-1" horizontalDiameterComputationExpression="2" verticalDiameterComputationExpression="2">
                    <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                    <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                    <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                  </style>
                </subNodeMappings>
                <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" showIcon="false" labelAlignment="LEFT" backgroundStyle="Liquid">
                  <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                  <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                  <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
                  <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_gray']"/>
                </style>
              </subContainerMappings>
              <style xsi:type="style:FlatContainerStyleDescription" arcWidth="5" arcHeight="5" borderSizeComputationExpression="1" showIcon="false" roundedCorner="true" backgroundStyle="GradientTopToBottom" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='SimpleStateColor']">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelFormat>bold</labelFormat>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
              </style>
            </subContainerMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" showIcon="false" labelExpression="[name/]" labelAlignment="LEFT" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='StateMachineBackGround']">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <style xsi:type="style:FlatContainerStyleDescription" labelSize="9" showIcon="false" labelExpression="service:setFragmentName()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='StateMachineBackGround']">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
          </style>
        </containerMappings>
        <toolSections name="Nodes">
          <ownedTools xsi:type="tool_1:NodeCreationDescription" name="createInitialStateMachine" label="Initial State" precondition="[container.eContents(forml::InitState)->size()=0/]" nodeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subNodeMappings[name='Frag_initialState'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']/@subContainerMappings[name='Frag_Region']/@subNodeMappings[name='Frag_initialStateInRegions']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_InitialPseudoState.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createInitState()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createStateNode" label="State" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_NormalState.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createNewState()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createRegion" label="Region" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']/@subContainerMappings[name='Frag_Region'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_RegionState.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createNewRegion()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="StatesRelationships" label="Relationships">
          <ownedTools xsi:type="tool_1:EdgeCreationDescription" name="setTransition" label="Transition" forceRefresh="true" edgeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@edgeMappings[name='Frag_transitionEdge']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_StateTransition.gif">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateNewTransition(source,target)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectStatesTarget" forceRefresh="true">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:SetValue" featureName="dst" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectStatesSource" forceRefresh="true" reconnectionKind="RECONNECT_SOURCE">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:SetValue" featureName="src" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:PaneBasedSelectionWizardDescription" name="selectPriorityTrans" label="Prioritization" precondition="[self.oclIsTypeOf(forml::Transition) /]" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Priority.gif" windowImagePath="/uw.cs.watform.forml.odesign/images/Icons/icon_Priority.gif" message="Select the transitions that the selected transitoin should have priority over:" candidatesExpression="service:get_Available_TransitionsForFragments()" preSelectedCandidatesExpression="service:get_AlreadySelected_Transitions()">
            <element name="element"/>
            <containerView name="containerView"/>
            <container name="container"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
                <subModelOperations xsi:type="tool:Unset" featureName="priority"/>
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Priority" referenceName="priority" variableName="prInstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="prInstance">
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.TransList" referenceName="translist" variableName="translistinstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:translistinstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="transitions" valueExpression="var:element"/>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </subModelOperations>
                <subModelOperations xsi:type="tool:If" conditionExpression="[thisEObject.oclAsType(forml::Transition).priority.translist->size()=0/]">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject.oclAsType(forml::Transition).priority/]">
                    <subModelOperations xsi:type="tool:RemoveElement"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectInitState" forceRefresh="true">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:SetValue" featureName="stateref" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
        </toolSections>
        <toolSections name="ClickableActions">
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="OpenSpecificationEditor" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@edgeMappings[name='Frag_transitionEdge']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowSetTransitionDialog()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ExternalJavaAction" name="OpenEmbeddedEditorForTransition" label="Open Transition Editor" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]" id="uw.cs.watform.forml.extensions.Ext_OpenEmbeddedEditor"/>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="NavigateToXtextEditor">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openTextEditor()"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropStatesBetweenRegions" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[newSemanticContainer/]">
                <subModelOperations xsi:type="tool:SetValue" featureName="states" valueExpression="[newSemanticContainer.oclAsType(forml::Region).states->append(element)/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="OLDOpenTransitionEditor">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:ExternalJavaActionCall" name="ShowTransitionEditor" action="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='OpenEmbeddedEditorForTransition']"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SwapTransitionRoles" label="Swap Transition Roles" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]" forceRefresh="true">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:swapTransitionRoles()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="NavigateTo" label="Go To" forceRefresh="true">
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenDashBoard" label="Open DashBoard" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_Dashboard.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System)/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureClass" label="Open Feature Class" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_ClassDiagram.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System).worldmodel/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureModel" label="Open Feature Model" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModel.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System).worldmodel/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenOriginalFeatureModule" label="Open Original Feature Module" precondition="[thisEObject.oclIsTypeOf(forml::StateContext)/]" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[thisEObject.oclAsType(forml::StateContext).ref.eContainer(forml::FeatureModule)/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool:Switch">
                      <cases conditionExpression="[tg.oclAsType(forml::FeatureModule).statemachine->size()=0/]">
                        <subModelOperations xsi:type="tool_1:Navigation" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                      </cases>
                      <default>
                        <subModelOperations xsi:type="tool_1:Navigation" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                      </default>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFrangment" label="Open Fragment Diagram" precondition="[thisEObject.oclIsTypeOf(forml::State) and (not (thisEObject.eContainer(forml::BehaviourModel).featuremodules.fragments.fragmentType->select(r|r.state.ref=thisEObject).eContainer(forml::FeatureModule))->isEmpty())/]" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:getAssociatedFragments()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="CreateDiagram" label="Create Diagram" forceRefresh="true">
            <menuItemDescription xsi:type="tool:OperationAction" name="FragmentOut" label="Create Fragment Diagram" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif">
              <view name="views">
                <subVariables xsi:type="tool:AcceleoVariable" name="SelectedFeature" computationExpression="service:selectFeatureWizard()"/>
              </view>
              <initialOperation>
                <firstModelOperations xsi:type="tool:If" conditionExpression="[SelectedFeature.oclIsTypeOf(forml::Feature)/]">
                  <subModelOperations xsi:type="tool:For" expression="[thisEObject/]" iteratorName="tg">
                    <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[SelectedFeature.oclAsType(forml::Feature).eContainer(forml::System)/]">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[SelectedFeature.eContainer(forml::System).behaviourmodel/]">
                        <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.FeatureModule" referenceName="featuremodules" variableName="FMInstance">
                          <subModelOperations xsi:type="tool:SetValue" featureName="featureref" valueExpression="var:SelectedFeature"/>
                          <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:FMInstance">
                            <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Fragment" referenceName="fragments" variableName="SMInstance">
                              <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['SM_'+SelectedFeature.oclAsType(forml::Feature).name/]"/>
                              <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:SMInstance">
                                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.FragmentType" referenceName="fragmentType" variableName="Frinstance">
                                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:Frinstance"/>
                                  <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.StateContext" referenceName="state" variableName="stateContextInstance">
                                    <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:stateContextInstance">
                                      <subModelOperations xsi:type="tool:SetValue" featureName="ref" valueExpression="[tg/]"/>
                                      <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Region" referenceName="regions" variableName="reginstance">
                                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['main'/]"/>
                                        <subModelOperations xsi:type="tool:ChangeContext" browseExpression="reginstance">
                                          <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.State" referenceName="states" variableName="refinstance">
                                            <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="aql:'S0'"/>
                                          </subModelOperations>
                                          <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.InitState" referenceName="init" variableName="initInstance">
                                            <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:initInstance">
                                              <subModelOperations xsi:type="tool:SetValue" featureName="stateref" valueExpression="var:refinstance"/>
                                            </subModelOperations>
                                          </subModelOperations>
                                        </subModelOperations>
                                      </subModelOperations>
                                    </subModelOperations>
                                  </subModelOperations>
                                </subModelOperations>
                              </subModelOperations>
                            </subModelOperations>
                            <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                          </subModelOperations>
                        </subModelOperations>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SetTriggeringEvent" label="Set Triggering Event (Ctrl + Space)" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowTriggeringEventOperations()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SetGuard" label="Set Guard" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowSetGuardDialog()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="SetWCAAction" label="Set Action (Ctrl + Alt + Space)" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowWCAActionOperations()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="OpenSpecification" label="Open Specification" precondition="[thisEObject.oclIsTypeOf(forml::Transition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:ShowSetTransitionDialog()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editTransitionLabel" forceRefresh="true" inputLabelExpression="service:openTransitionEditorShell()">
            <mask mask="{0}"/>
            <initialOperation/>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editName" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:If" conditionExpression="[arg0.size()>0/]">
                <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="var:0"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteStatesOrRegions">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Delete_StatesOrRegions()">
                <subModelOperations xsi:type="tool:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="delete_FragTransition">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:RemoveElement"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <decorationDescriptionsSet>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="isFragmentExistsDiagram" position="NORTH_EAST" preconditionExpression="[thisEObject.oclIsTypeOf(forml::State) and (not (thisEObject.eContainer(forml::BehaviourModel).featuremodules.fragments.fragmentType->select(r|r.state.ref=thisEObject).eContainer(forml::FeatureModule))->isEmpty())/]" imageExpression="/uw.cs.watform.forml.odesign/images/Icons/icon_NavigateTo.gif" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@defaultLayer/@containerMappings[name='FragmentTypeContainer']/@subContainerMappings[name='Frag_StateMachineMainRegion']/@subContainerMappings[name='Frag_SimpleState']"/>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="transitionErrorDisplayDecorator" position="CENTER" imageExpression="/uw.cs.watform.forml.odesign/GUI/GUI/com/uwaterloo/cs/forml/odesign/res/icon_removeButton16.png"/>
        </decorationDescriptionsSet>
      </defaultLayer>
      <additionalLayers name="Constraints">
        <containerMappings name="FM_Frag_ConstraintsContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Constraints']/@toolSections.0/@ownedTools[name='deleteConstraints']" semanticCandidatesExpression="feature:constraints" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@additionalLayers[name='Constraints']/@toolSections.1/@ownedTools[name='OpenConstraintsEditor']" domainClass="forml.Constraint" childrenPresentation="List">
          <subNodeMappings name="Frag_Macro_Description" semanticCandidatesExpression="[eAllContents(forml::Macro)/]" domainClass="forml.Macro">
            <style xsi:type="style:BundledImageDescription" labelExpression="service:getConstraintsText()" labelAlignment="LEFT" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <subNodeMappings name="Frag_Pred_Description" semanticCandidatesExpression="[eAllContents(forml::Predicate)/]" domainClass="forml.Predicate">
            <style xsi:type="style:BundledImageDescription" labelExpression="service:getConstraintsText()" labelAlignment="LEFT" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" labelSize="11" showIcon="false" labelExpression="['Constraints'/]" roundedCorner="true" widthComputationExpression="20" heightComputationExpression="20" backgroundStyle="Liquid">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_orange']"/>
          </style>
        </containerMappings>
        <toolSections name="Constraints">
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createConstraintsContainer" label="Constraints" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@additionalLayers[name='Constraints']/@containerMappings[name='FM_Frag_ConstraintsContainer']">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[container/]">
                <subModelOperations xsi:type="tool:If" conditionExpression="[container.constraints.oclIsUndefined()/]">
                  <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Constraint" referenceName="constraints" variableName="constInstance"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool:ExternalJavaAction" name="OpenEmbeddedEditorforConstraints" label="Open Constraints Editor" precondition="[thisEObject.oclIsTypeOf(forml::Constraint)/]" id="uw.cs.watform.forml.extensions.Ext_OpenEmbeddedEditor"/>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="OpenConstraintsEditor" label="Open Constraints Editor" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@additionalLayers[name='Constraints']/@containerMappings[name='FM_Frag_ConstraintsContainer']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[element.oclAsType(forml::Constraint)/]">
                <subModelOperations xsi:type="tool:ExternalJavaActionCall" name="dbl_OpenEmbeddedEditorforConstraints" action="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']/@additionalLayers[name='Constraints']/@toolSections.1/@ownedTools[name='OpenEmbeddedEditorforConstraints']"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </additionalLayers>
      <additionalLayers name="Class Layer" activeByDefault="true">
        <containerMappings xsi:type="description_1:ContainerMappingImport" name="import_FeatureClassContainer" semanticCandidatesExpression="[thisEObject.oclAsType(forml::FeatureModule).featureref/]" reusedContainerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']" childrenPresentation="VerticalStack" importedMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']"/>
        <toolSections name="import_FeatureClassTools" reusedTools="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditFeatureMessage'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditAttributeForEntityAndFeature'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='changeMsgType']/@menuItemDescription.0 //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='changeMsgType']/@menuItemDescription.1 //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='changeMsgType'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='openMsgEditDialog'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='switchControlAttribute'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']">
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropMessageToState" forceRefresh="true" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer']/@subNodeMappings[name='FeatureAttNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:DropFeatureObjectsToState(element)"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </additionalLayers>
    </ownedRepresentations>
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="WorldModel_FeatureModel_Diagram" label="Feature Model Diagram" initialisation="true" domainClass="forml.WorldModel" preconditionExpression="service:doesDashboardExists" enablePopupBars="true">
      <validationSet name="FeatureModelValidation">
        <ownedRules xsi:type="validation:SemanticValidationRule" name="OrNodesWithLessThan2Children" level="ERROR" message="The OR Node must have a minimum of two children feature nodes..." targetClass="forml.OrNode">
          <audits auditExpression="service:validate_OrNodesWithLessThanTwoChildren()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="XOrNodesWithLessThan2Children" level="ERROR" message="The XOR Node must have a minimum of two children feature nodes..." targetClass="forml.XORNode">
          <audits auditExpression="service:validate_XOrNodesWithLessThanTwoChildren()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:SemanticValidationRule" name="XOrNodesWithLessThan2Children" level="ERROR" message="The AND Node must have a minimum of two children feature nodes..." targetClass="forml.AndNode">
          <audits auditExpression="service:validate_AndNodesWithLessThanTwoChildren()"/>
        </ownedRules>
      </validationSet>
      <layout xsi:type="description_1:OrderedTreeLayout" childrenExpression="[eContents(Node)/]" nodeMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='andFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='orFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='xorFeatureNode']"/>
      <diagramInitialisation>
        <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
          <subModelOperations xsi:type="tool:If" conditionExpression="[thisEObject.oclAsType(forml::WorldModel).constraints.oclIsUndefined()/]">
            <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
              <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Constraint" referenceName="constraints" variableName="ConsInstance"/>
            </subModelOperations>
          </subModelOperations>
        </firstModelOperations>
      </diagramInitialisation>
      <defaultLayer name="FeatureModelLayer" label="Feature Model">
        <nodeMappings name="splNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='editNameForSPL']" domainClass="forml.SPL" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='dropLogicalNodes']">
          <borderedNodeMappings name="orFeatureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" semanticCandidatesExpression="feature:ors" domainClass="forml.OrNode">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="11" showIcon="false" labelExpression="" sizeComputationExpression="-1" labelPosition="node" roundedCorner="true" workspacePath="/uw.cs.watform.forml.odesign/images/Icons/OrNodeDecorator.png">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>EAST</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
            </style>
          </borderedNodeMappings>
          <borderedNodeMappings name="xorFeatureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" semanticCandidatesExpression="feature:xors" domainClass="forml.XORNode">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="11" showIcon="false" labelExpression="" sizeComputationExpression="-1" labelPosition="node" roundedCorner="true" workspacePath="/uw.cs.watform.forml.odesign/images/Icons/XOrNodeDecorator.png">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>EAST</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
            </style>
          </borderedNodeMappings>
          <borderedNodeMappings name="andFeatureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" semanticCandidatesExpression="feature:ands" domainClass="forml.AndNode">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="11" showIcon="false" labelExpression="" sizeComputationExpression="-1" labelPosition="node" roundedCorner="true" workspacePath="/uw.cs.watform.forml.odesign/images/Icons/AndNodeDecorator.png">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>EAST</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
            </style>
          </borderedNodeMappings>
          <style xsi:type="style:SquareDescription" labelSize="10" showIcon="false" labelPosition="node" resizeKind="NSEW" width="8" height="3" color="//@userColorsPalettes[name='FORMLPalette']/@entries[name='SPLNodeBackGround']">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
          </style>
        </nodeMappings>
        <nodeMappings name="featureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.0/@ownedTools[name='editNameForFeatureNode']" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='dblClickOnFeatureNode']" domainClass="forml.FeatureNode" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='dropLogicalNodes']">
          <borderedNodeMappings name="orFeatureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" semanticCandidatesExpression="feature:ors" domainClass="forml.OrNode">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="11" showIcon="false" labelExpression="" sizeComputationExpression="-1" labelPosition="node" roundedCorner="true" workspacePath="/uw.cs.watform.forml.odesign/images/Icons/OrNodeDecorator.png">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>EAST</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
            </style>
          </borderedNodeMappings>
          <borderedNodeMappings name="xorFeatureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" semanticCandidatesExpression="feature:xors" domainClass="forml.XORNode">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="11" showIcon="false" labelExpression="" sizeComputationExpression="-1" labelPosition="node" roundedCorner="true" workspacePath="/uw.cs.watform.forml.odesign/images/Icons/XOrNodeDecorator.png">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>EAST</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
            </style>
          </borderedNodeMappings>
          <borderedNodeMappings name="andFeatureNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='DeleteNode']" semanticCandidatesExpression="feature:ands" domainClass="forml.AndNode">
            <style xsi:type="style:WorkspaceImageDescription" labelSize="11" showIcon="false" labelExpression="" sizeComputationExpression="-1" labelPosition="node" roundedCorner="true" workspacePath="/uw.cs.watform.forml.odesign/images/Icons/AndNodeDecorator.png">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <forbiddenSides>WEST</forbiddenSides>
              <forbiddenSides>EAST</forbiddenSides>
              <forbiddenSides>NORTH</forbiddenSides>
            </style>
          </borderedNodeMappings>
          <style xsi:type="style:SquareDescription" labelSize="9" showIcon="false" labelExpression="[feature.name/]" labelPosition="node" resizeKind="NSEW" width="8" height="3" color="//@userColorsPalettes[name='FORMLPalette']/@entries[name='FeatureNodeBackGround']">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
          </style>
          <conditionnalStyles predicateExpression="service:isOrNode()">
            <style xsi:type="style:SquareDescription" labelSize="9" showIcon="false" labelExpression="[feature.name/]" labelPosition="node" resizeKind="NSEW" width="8" height="3" color="//@userColorsPalettes[name='FORMLPalette']/@entries[name='OrFeatureNodeBackGround']">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="service:isXorNode()">
            <style xsi:type="style:SquareDescription" labelSize="9" showIcon="false" labelExpression="[feature.name/]" labelPosition="node" resizeKind="NSEW" width="8" height="3" color="//@userColorsPalettes[name='FORMLPalette']/@entries[name='XorFeatureNodeBackGround']">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="service:isAndNode()">
            <style xsi:type="style:SquareDescription" labelSize="9" showIcon="false" labelExpression="[feature.name/]" labelPosition="node" resizeKind="NSEW" width="8" height="3" color="//@userColorsPalettes[name='FORMLPalette']/@entries[name='AndFeatureNodeBackGround']">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </conditionnalStyles>
        </nodeMappings>
        <edgeMappings name="FMRelation" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='editFeatureModelEdge']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']/@borderedNodeMappings[name='andFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='andFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']/@borderedNodeMappings[name='orFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='orFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']/@borderedNodeMappings[name='xorFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='xorFeatureNode']" targetFinderExpression="[thisEObject.eContainer(forml::Node)/]" reconnections="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='reconnectFeatureNodeTarget']">
          <style sourceArrow="FillDiamond" targetArrow="NoDecoration" sizeComputationExpression="2" endsCentering="Both">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            <beginLabelStyleDescription labelSize="10" showIcon="false" labelExpression="service:showMultiplicityForFeatureNodes()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </beginLabelStyleDescription>
          </style>
          <conditionnalStyles predicateExpression="service:isOptional()">
            <style sourceArrow="Diamond" targetArrow="NoDecoration" sizeComputationExpression="2" endsCentering="Both">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
              <beginLabelStyleDescription labelSize="10" showIcon="false" labelExpression="service:showMultiplicityForFeatureNodes()">
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </beginLabelStyleDescription>
            </style>
          </conditionnalStyles>
          <conditionnalStyles predicateExpression="service:isMandatory">
            <style sourceArrow="FillDiamond" targetArrow="NoDecoration" sizeComputationExpression="2" endsCentering="Both">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
              <beginLabelStyleDescription labelSize="10" showIcon="false">
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </beginLabelStyleDescription>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <toolSections name="FeatureModelToolSection">
          <ownedTools xsi:type="tool_1:NodeCreationDescription" name="createSPL" label="SPL Node" precondition="service:noExistingSPL()" nodeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_SPLNode.png">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createSPL()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editNameForSPL" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="var:0"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editNameForFeatureNode" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Rename_FeatureNode(0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="CreateFeatureNode" label="Feature Node" forceRefresh="true" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureNode.png">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateFeatureNode()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="CreateorFeatureNode" label="OR Node" forceRefresh="true" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_orFeatureNode.png">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateOrNode()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="CreatexorFeatureNode" label="XOR Node" forceRefresh="true" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_xorFeatureNode.png">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateXorNode()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="CreateandFeatureNode" label="AND Node" forceRefresh="true" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_andFeatureNode.png">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateAndNode()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="ClickableActions">
          <ownedTools xsi:type="tool:OperationAction" name="setMultiplicity" label="Set Multiplicity" precondition="[thisEObject.oclIsKindOf(forml::FeatureNode)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:For" expression="[thisEObject/]" iteratorName="tg">
                <subModelOperations xsi:type="tool:SetValue" featureName="multiplicity" valueExpression="service:getFeatureNodeMultiplicity()"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="NavigateToFeatureModule" label="Go To">
            <menuItemDescription xsi:type="tool:OperationAction" name="createFeatureModule" label="Create Feature Module" precondition="service:notFeatureModuleExists()" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:createFeatureModule()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureModule" label="Open Feature Module" precondition="service:isFeatureModuleExists()" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:findFMtoNavigateFromFeatureNode()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool:If" conditionExpression="service:isFeatureModule()">
                      <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool:If" conditionExpression="service:isFragmentModule()">
                      <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureClass" label="Open Feature Class" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_ClassDiagram.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System).worldmodel/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenDashBoard" label="Open DashBoard" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_Dashboard.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System)/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropLogicalNodes" forceRefresh="true" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='xorFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']/@borderedNodeMappings[name='xorFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='orFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']/@borderedNodeMappings[name='orFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']/@borderedNodeMappings[name='andFeatureNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='splNode']/@borderedNodeMappings[name='andFeatureNode']" dragSource="BOTH">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:MoveLogicalNodes(element,oldSemanticContainer)"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="DeleteNode">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:If" conditionExpression="service:confirmFeatureDelete()">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject.oclAsType(forml::Node)/]">
                  <subModelOperations xsi:type="tool:For" expression="[thisEObject.oclAsType(forml::Node).eAllContents(forml::Node)/]" iteratorName="sf">
                    <subModelOperations xsi:type="tool:RemoveElement"/>
                    <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[sf.oclAsType(forml::FeatureNode).feature/]">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Delete_FeatureNode()"/>
                      <subModelOperations xsi:type="tool:RemoveElement"/>
                    </subModelOperations>
                  </subModelOperations>
                  <subModelOperations xsi:type="tool:RemoveElement"/>
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject.oclAsType(forml::FeatureNode).feature/]">
                    <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Delete_FeatureNode()"/>
                    <subModelOperations xsi:type="tool:RemoveElement"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectFeatureNodeTarget">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Reconnect_Nodes(source, target)"/>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editFeatureModelEdge">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:self.editUmlLabel(arg0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="dblClickOnFeatureNode" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:OpenFPCFeatureNode()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <decorationDescriptionsSet>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="isFeatureModuleExistsDiagram" position="NORTH_EAST" preconditionExpression="service:isFeatureModuleExists()" imageExpression="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']/@defaultLayer/@nodeMappings[name='featureNode']"/>
        </decorationDescriptionsSet>
      </defaultLayer>
    </ownedRepresentations>
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="WorldModel_FeatureClasses_Diagram" label="Feature Classes Diagram" initialisation="true" domainClass="forml.WorldModel" preconditionExpression="service:doesDashboardExists" enablePopupBars="true">
      <validationSet name="ClassDiagramValidation">
        <ownedRules xsi:type="validation:ViewValidationRule" name="FeaturesWithoutFeatureModule" message="The Class is defined but has been never used in a State-Machine Diagram ..." targets="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']">
          <audits auditExpression="service:validate_FeaturesWithoutReferrers()"/>
          <fixes name="Create a Empty State-Machine for the Class/Feature">
            <initialOperation>
              <firstModelOperations xsi:type="tool:For" expression="service:findFMtoNavigateFromFeatureNode()" iteratorName="tg">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                  <subModelOperations xsi:type="tool:If" conditionExpression="service:isFeatureModule()">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </fixes>
          <fixes name="Create State-Machine for the Class/Feature Based on Another State-Machine">
            <initialOperation>
              <firstModelOperations xsi:type="tool:For" expression="service:CreateStateMachineBasedOnAnotherStateMachine()" iteratorName="fm">
                <subModelOperations xsi:type="tool:If" conditionExpression="service:notNull()">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:fm">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </fixes>
        </ownedRules>
        <ownedRules xsi:type="validation:ViewValidationRule" name="FeatureMessagesNeverUsed" message="The message is defined but has been never used in a State Diagram ..." targets="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']">
          <audits auditExpression="service:validate_MessagesWithoutReferrers()"/>
        </ownedRules>
        <ownedRules xsi:type="validation:ViewValidationRule" name="FeatureAttributesNeverUsed" message="The attributes is defined but has been never used in a State Diagram ..." targets="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer']/@subNodeMappings[name='FeatureAttNode']">
          <audits auditExpression="service:validate_AttributesWithoutReferrers()"/>
        </ownedRules>
      </validationSet>
      <layout xsi:type="description_1:CompositeLayout" padding="50"/>
      <diagramInitialisation>
        <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
          <subModelOperations xsi:type="tool:If" conditionExpression="[thisEObject.oclAsType(forml::WorldModel).constraints.oclIsUndefined()/]">
            <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
              <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Constraint" referenceName="constraints" variableName="ConsInstance"/>
            </subModelOperations>
          </subModelOperations>
        </firstModelOperations>
      </diagramInitialisation>
      <defaultLayer name="FeatureClassLayer" label="Feature Class">
        <containerMappings name="featureClassContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditFeatureName']" domainClass="forml.Feature" childrenPresentation="VerticalStack">
          <subContainerMappings name="featureAttributesContainer" preconditionExpression="service:hasAttributes()" semanticCandidatesExpression="[self/]" domainClass="forml.Feature" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='dropAttributesFromFEtoFE']" childrenPresentation="List">
            <subNodeMappings name="FeatureAttNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditAttributeForEntityAndFeature']" semanticCandidatesExpression="service:getAttributes()" domainClass="forml.Attribute">
              <style xsi:type="style:WorkspaceImageDescription" labelExpression="service:PopulateAttributeLabel()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureAttribute.gif" labelAlignment="LEFT" sizeComputationExpression="-1" labelPosition="node" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" showIcon="false" labelExpression="['Attributes'/]" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_FeatureClass_Brown']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <subContainerMappings name="messageContainerByInputType" preconditionExpression="service:hasInputs()" semanticCandidatesExpression="[self/]" domainClass="forml.Feature" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='dropInputMessageToFeatures']" childrenPresentation="List">
            <subNodeMappings name="InputMsgNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedMessages']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditFeatureMessage']" semanticCandidatesExpression="service:getInputMessages()" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='openMsgEditDialog']" domainClass="forml.RefMessage">
              <style xsi:type="style:WorkspaceImageDescription" labelExpression="service:PopulateMessageSignature()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_InMsg.gif" labelAlignment="LEFT" sizeComputationExpression="-1" labelPosition="node" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" showIcon="false" labelExpression="['&lt;&lt;Input>>'/]" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_FeatureClass_Brown']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <subContainerMappings name="messageContainerByOutputType" preconditionExpression="service:hasOutputs()" semanticCandidatesExpression="[self/]" domainClass="forml.Feature" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='dropOutputMessageToFeatures']" childrenPresentation="List">
            <subNodeMappings name="OutputMsgNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedMessages']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditFeatureMessage']" semanticCandidatesExpression="service:getOutputMessages()" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.1/@ownedTools[name='openMsgEditDialog']" domainClass="forml.RefMessage">
              <style xsi:type="style:WorkspaceImageDescription" labelExpression="service:PopulateMessageSignature()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_OutMsg.gif" labelAlignment="LEFT" sizeComputationExpression="-1" labelPosition="node" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" showIcon="false" labelExpression="['&lt;&lt;Output>>'/]" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_FeatureClass_Brown']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <style xsi:type="style:FlatContainerStyleDescription" arcWidth="12" arcHeight="12" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" borderLineStyle="dash" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureClass.gif" roundedCorner="true" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_FeatureClass_Brown']">
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
          </style>
        </containerMappings>
        <toolSections name="FeatureClassToolSection" label="Feature Class">
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createFeatureContainer" label="Feature Class" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_CreateFeature.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateFeatureClass"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="attributeNodeCreate" label="Feature Attribute" precondition="service:canCreateEntityAttribute()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_CreateFeatureAttribute.gif">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateAttribute()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="InputMessageNodeCreate" label="Input Message" precondition="service:canCreateMessage()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_InMsg.gif">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createNewInputMessage()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="OutputMessageNodeCreate" label="Output Message" precondition="service:canCreateMessage()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_OutMsg.gif">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createNewOutputMessage()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="ClickableActions">
          <ownedTools xsi:type="tool:PopupMenu" name="changeMsgType" label="Change Message Type" precondition="[self.oclIsKindOf(forml::RefMessage)/]">
            <menuItemDescription xsi:type="tool:OperationAction" name="setAsInputMsg" label="Input Message" precondition="[self.oclAsType(forml::RefMessage).refMsg.oclIsKindOf(forml::Output)/]">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:MessageTypeChange()"/>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="setAsOuputMsg" label="Output Message" precondition="[self.oclAsType(forml::RefMessage).refMsg.oclIsKindOf(forml::Input)/]">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:MessageTypeChange()"/>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="switchControlAttribute" label="Switch Control Attribute" precondition="[thisEObject.oclIsKindOf(forml::Attribute) or thisEObject.oclIsKindOf(forml::Entity) or thisEObject.oclIsKindOf(forml::Association) /]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:Switch">
                <cases conditionExpression="[thisEObject.eGet('ctrl')=false/]">
                  <subModelOperations xsi:type="tool:SetValue" featureName="ctrl" valueExpression="['true'/]"/>
                </cases>
                <default>
                  <subModelOperations xsi:type="tool:SetValue" featureName="ctrl" valueExpression="['false'/]"/>
                </default>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropInputMessageToFeatures" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:containerDropMessage(element)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropOutputMessageToFeatures" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:containerDropMessage(element)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="NavigateTo" label="Go To" precondition="[self.oclIsKindOf(Feature)/]">
            <menuItemDescription xsi:type="tool:OperationAction" name="createFeatureModule" label="Create Feature Module" precondition="service:notFeatureModuleExists()" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:createFeatureModule()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureModule" label="Open Feature Module" precondition="service:isFeatureModuleExists()" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:findFMtoNavigateFromFeatureNode()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool:If" conditionExpression="service:isFeatureModule()">
                      <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool:If" conditionExpression="service:isFragmentModule()">
                      <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='Fragment_Diagram']"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureModel" label="Open Feature Model" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModel.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System).worldmodel/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenDashBoard" label="Open DashBoard" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_Dashboard.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="[self.eContainer(forml::System)/]" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="CheckforLikelyInvariant" label="Check for Likely Invariant">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:checkLikelyInvariants()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="openMsgEditDialog" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByInputType']/@subNodeMappings[name='InputMsgNode'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='messageContainerByOutputType']/@subNodeMappings[name='OutputMsgNode']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:EditFeatureMessageLabelByDoubleClick()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="dropAttributesFromFEtoFE" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']/@subContainerMappings[name='featureAttributesContainer']/@subNodeMappings[name='FeatureAttNode']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CopyAttribute(element)"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteReferencedElements">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:deleteReferencedElements()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditFeatureName" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Rename_FeatureClass(0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditAttributeForEntityAndFeature" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:EditTypeableLabels(arg0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditFeatureMessage" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:EditTypeableLabels(arg0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteReferencedMessages">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:For" expression="[containerView.target/]" iteratorName="elem">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:deleteMessageFromFeature(element)"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <decorationDescriptionsSet>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="isFeatureModuleExistsDiagram" position="NORTH_EAST" preconditionExpression="service:isFeatureModuleExists()" imageExpression="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer']"/>
        </decorationDescriptionsSet>
      </defaultLayer>
      <additionalLayers name="EntityClassLayer" label="Entity Class" activeByDefault="true">
        <edgeMappings name="GeneralizationEdgeBetweenEntities" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.1/@ownedTools[name='deleteGeneralization']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" targetFinderExpression="aql:self.superType" reconnections="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.1/@ownedTools[name='reconnectGeneralization']">
          <style targetArrow="InputClosedArrow" sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            <centerLabelStyleDescription>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
        <edgeMappings name="AggregationClassRolesEdge" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.3/@ownedTools[name='editAssociations']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" targetFinderExpression="[self.part.type/]" sourceFinderExpression="[self.whole.type/]" domainClass="forml.Aggregation" useDomainElement="true">
          <style sourceArrow="Diamond" targetArrow="NoDecoration" routingStyle="manhattan">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <beginLabelStyleDescription showIcon="false" labelExpression="service:srcRole_WholeGetLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </beginLabelStyleDescription>
            <centerLabelStyleDescription showIcon="false" labelExpression="[name/]">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
            <endLabelStyleDescription showIcon="false" labelExpression="service:desRole_PartGetLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </endLabelStyleDescription>
          </style>
        </edgeMappings>
        <edgeMappings name="CompositionClassRolesEdge" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.3/@ownedTools[name='editAssociations']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" targetFinderExpression="[self.part.type/]" sourceFinderExpression="[self.whole.type/]" domainClass="forml.Composition" useDomainElement="true">
          <style sourceArrow="FillDiamond" targetArrow="NoDecoration" routingStyle="manhattan">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <beginLabelStyleDescription showIcon="false" labelExpression="service:srcRole_WholeGetLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </beginLabelStyleDescription>
            <centerLabelStyleDescription showIcon="false" labelExpression="[name/]">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
            <endLabelStyleDescription showIcon="false" labelExpression="service:desRole_PartGetLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </endLabelStyleDescription>
          </style>
        </edgeMappings>
        <edgeMappings name="AssociationClassRolesEdge" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.3/@ownedTools[name='editAssociations']" sourceMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='SPL']/@containerMappings[name='SPLClassContainer']" targetMapping="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@containerMappings[name='featureClassContainer'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='SPL']/@containerMappings[name='SPLClassContainer']" targetFinderExpression="[self.desRole.type/]" sourceFinderExpression="[self.srcRole.type/]" domainClass="forml.Association" useDomainElement="true">
          <style targetArrow="NoDecoration" routingStyle="manhattan">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <beginLabelStyleDescription showIcon="false" labelExpression="service:srcRole_WholeGetLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </beginLabelStyleDescription>
            <centerLabelStyleDescription showIcon="false" labelExpression="[name/]">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
            <endLabelStyleDescription showIcon="false" labelExpression="service:desRole_PartGetLabel()">
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </endLabelStyleDescription>
          </style>
        </edgeMappings>
        <containerMappings name="entityClassContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.3/@ownedTools[name='EditEntitiesName']" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.2/@ownedTools[name='Open%20EEF%20Wizard']" domainClass="forml.Entity" childrenPresentation="VerticalStack">
          <subContainerMappings name="entityAttributesContainer" preconditionExpression="service:hasAttributes()" semanticCandidatesExpression="[self/]" domainClass="forml.Entity" dropDescriptions="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.3/@ownedTools[name='AttributeCopyMove']" childrenPresentation="List">
            <subNodeMappings name="EntityAttNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditAttributeForEntityAndFeature']" semanticCandidatesExpression="feature:attributes" domainClass="forml.Attribute">
              <style xsi:type="style:WorkspaceImageDescription" labelExpression="service:PopulateAttributeLabel()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Attribute.gif" labelAlignment="LEFT" sizeComputationExpression="-1" labelPosition="node" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" showIcon="false" labelExpression="['Attributes'/]" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_EntityClass_Brown']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <subContainerMappings name="entityFunctionContainer" preconditionExpression="service:hasFunctions()" semanticCandidatesExpression="[self/]" domainClass="forml.Entity" childrenPresentation="List">
            <subNodeMappings name="EntityFuncNode" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@toolSections.3/@ownedTools[name='EditFunction']" semanticCandidatesExpression="feature:functions" domainClass="forml.Function">
              <style xsi:type="style:WorkspaceImageDescription" labelExpression="service:PopulateFunctionLabel()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Function.gif" labelAlignment="LEFT" sizeComputationExpression="-1" labelPosition="node" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" showIcon="false" labelExpression="['Operations'/]" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_EntityClass_Brown']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            </style>
          </subContainerMappings>
          <style xsi:type="style:FlatContainerStyleDescription" arcWidth="12" arcHeight="12" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_EntityClass.gif" roundedCorner="true" backgroundStyle="Liquid" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_EntityClass_Brown']">
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
          </style>
        </containerMappings>
        <toolSections name="EntityClassToolSection" label="Entity Class">
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createEntityContainer" label="Entity Class" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_CreateEntity.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[container/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Entity" referenceName="concepts" variableName="entityInstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:populateEntityName()"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="attributeForEntitiesNodeCreate" label="Entity Attribute" precondition="service:canCreateEntityAttribute()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_CreateEntityAttribute.gif">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateAttribute()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ToolDescription" name="functionForEntitiesNodeCreate" label="Entity Function" precondition="service:canCreateEntityFunction()" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_CreateEntityFunction.gif">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CreateFunction"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="EntitiesRelationships" label="Relationships">
          <ownedTools xsi:type="tool_1:EdgeCreationDescription" name="createGeneralization" label="Generalization" edgeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@edgeMappings[name='GeneralizationEdgeBetweenEntities']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Generalization.png">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="aql:self">
                <subModelOperations xsi:type="tool:SetValue" featureName="superType" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:EdgeCreationDescription" name="setAssociation" label="Association" forceRefresh="true" edgeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@edgeMappings[name='AssociationClassRolesEdge']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Association.png">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:Switch">
                <cases conditionExpression="[source.oclIsTypeOf(forml::Association)/]">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[source.oclAsType(forml::Association)/]">
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Role" referenceName="srcRole" variableName="srcInstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:srcInstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[target.oclAsType(forml::Roleable).name.toLower()/]"/>
                        <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:target"/>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </cases>
                <cases conditionExpression="[source.oclIsTypeOf(forml::Entity) or source.oclIsTypeOf(forml::Feature) /]">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[source.eContainer(forml::WorldModel)/]">
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Association" referenceName="concepts" variableName="assInstance">
                      <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['Association'+(eContainer(forml::WorldModel).eContents(forml::Association)->size()).toString()/]"/>
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="assInstance">
                        <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Role" referenceName="srcRole" variableName="srcInstance">
                          <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:srcInstance">
                            <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[source.oclAsType(forml::Roleable).name.toLower()/]"/>
                            <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:source"/>
                          </subModelOperations>
                        </subModelOperations>
                        <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Role" referenceName="desRole" variableName="dstInstance">
                          <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:dstInstance">
                            <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[target.oclAsType(forml::Roleable).name.toLower()/]"/>
                            <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:target"/>
                          </subModelOperations>
                        </subModelOperations>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </cases>
                <default/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:EdgeCreationDescription" name="setAggregation" label="Aggregation" forceRefresh="true" edgeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@edgeMappings[name='AggregationClassRolesEdge']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Aggregation.png">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[source.eContainer(forml::WorldModel)/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Aggregation" referenceName="concepts" variableName="aggInstance">
                  <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['Aggregation'+(eContainer(forml::WorldModel).eContents(forml::Aggregation)->size()).toString()/]"/>
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="aggInstance">
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Decl" referenceName="whole" variableName="srcInstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:srcInstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[source.oclAsType(forml::Entity).name.toLower()/]"/>
                        <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:source"/>
                      </subModelOperations>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Decl" referenceName="part" variableName="dstInstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:dstInstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[target.oclAsType(forml::Entity).name.toLower()/]"/>
                        <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:target"/>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:EdgeCreationDescription" name="setComposition" label="Composition" forceRefresh="true" edgeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@edgeMappings[name='CompositionClassRolesEdge']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Composition.png">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[source.eContainer(forml::WorldModel)/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Composition" referenceName="concepts" variableName="compInstance">
                  <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['Composition'+(eContainer(forml::WorldModel).eContents(forml::Composition)->size()).toString()/]"/>
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="compInstance">
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Decl" referenceName="whole" variableName="srcInstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:srcInstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[source.oclAsType(forml::Entity).name.toLower()/]"/>
                        <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:source"/>
                      </subModelOperations>
                    </subModelOperations>
                    <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Decl" referenceName="part" variableName="dstInstance">
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:dstInstance">
                        <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="[target.oclAsType(forml::Entity).name.toLower()/]"/>
                        <subModelOperations xsi:type="tool:SetValue" featureName="type" valueExpression="var:target"/>
                      </subModelOperations>
                    </subModelOperations>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:NodeCreationDescription" name="attributeForAssociationsNodeCreate" label="Association Attribute" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_CreateEntityAttribute.png">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[container.eContainer().eContainer()/]">
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[container/]">
                  <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Attribute" referenceName="attributes" variableName="attributeInstance">
                    <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="aql:'att'"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteGeneralization" forceRefresh="true">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:Unset" featureName="superType"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ReconnectEdgeDescription" name="reconnectGeneralization" forceRefresh="true">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[preSource/]">
                <subModelOperations xsi:type="tool:SetValue" featureName="superType" valueExpression="[target/]"/>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
        </toolSections>
        <toolSections name="ClickableActions">
          <ownedTools xsi:type="tool:OperationAction" name="editAssociation" label="Edit Association" precondition="[thisEObject.oclIsTypeOf(forml::Association)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openEditAssociationForm()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="editCompsitionAndAggregation" label="Edit Association" precondition="[thisEObject.oclIsTypeOf(forml::Aggregation) or thisEObject.oclIsTypeOf(forml::Composition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openEditCompositionAggregationForm()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="swapAssociation" label="Swap Roles" precondition="[thisEObject.oclIsTypeOf(forml::Aggregation) or thisEObject.oclIsTypeOf(forml::Composition)/]">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:swapRoles()"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="Open EEF Wizard" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ExternalJavaAction" name="Open EEF Wizard Action" id="org.eclipse.sirius.eef.actions.openPropertiesWizard"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:PopupMenu" name="NavigateTo" label="Go To" precondition="[self.oclIsKindOf(Entity)/]">
            <menuItemDescription xsi:type="tool:OperationAction" name="createFeatureModule" label="Create State-Machine" precondition="service:notFeatureModuleExists()" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:createFeatureModule()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="OpenFeatureModule" label="Open State-Machine" precondition="service:isFeatureModuleExists()" forceRefresh="true" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:findFMtoNavigateFromFeatureNode()" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool:If" conditionExpression="service:isFeatureModule()">
                      <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                    </subModelOperations>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="createFeatureModuleWithStructure" label="Create State-Machine With a Base Structure" precondition="[false/]" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views">
                <subVariables xsi:type="tool:SelectModelElementVariable" name="SelectedFeatureModule" candidatesExpression="service:getRepresentationsForFeatureModulesSortedbyName()" message="Select the base feature module"/>
              </view>
              <initialOperation>
                <firstModelOperations xsi:type="tool:For" expression="service:createFeatureModuleWithBaseStructure(SelectedFeatureModule)" iteratorName="tg">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:tg">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
            <menuItemDescription xsi:type="tool:OperationAction" name="createFeatureModuleWithStructure" label="Create State-Machine Based on Another State-Machine" precondition="service:notFeatureModuleExists()" icon="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif">
              <view name="views">
                <subVariables xsi:type="tool:AcceleoVariable" name="fm" computationExpression="service:CreateStateMachineBasedOnAnotherStateMachine()"/>
              </view>
              <initialOperation>
                <firstModelOperations xsi:type="tool:If" conditionExpression="[fm&lt;>null/]">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:fm">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </menuItemDescription>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="editAssociations">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:self.editAssociationLabel(arg0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditFunction" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:EditTypeableLabels(arg0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditEntitiesName" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Rename_Entity(0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:ContainerDropDescription" name="AttributeCopyMove" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']/@subContainerMappings[name='entityAttributesContainer']/@subNodeMappings[name='EntityAttNode']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:CopyMoveAttribute(element,oldSemanticContainer,newSemanticContainer)"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <decorationDescriptionsSet>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration" name="isFeatureModuleExistsDiagramForEntity" position="NORTH_EAST" distributionDirection="HORIZONTAL" preconditionExpression="service:isFeatureModuleExists()" imageExpression="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='EntityClassLayer']/@containerMappings[name='entityClassContainer']"/>
        </decorationDescriptionsSet>
      </additionalLayers>
      <additionalLayers name="Constraints">
        <containerMappings name="FCConstraintsContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Constraints']/@toolSections.0/@ownedTools[name='deleteConstraints']" semanticCandidatesExpression="feature:constraints" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Constraints']/@toolSections.1/@ownedTools[name='OpenConstraintsEditor']" domainClass="forml.Constraint" childrenPresentation="List">
          <subNodeMappings name="Macro_Description" semanticCandidatesExpression="[eAllContents(forml::Macro)/]" domainClass="forml.Macro">
            <style xsi:type="style:BundledImageDescription" labelExpression="service:getConstraintsText()" labelAlignment="LEFT" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <subNodeMappings name="Pred_Description" semanticCandidatesExpression="[eAllContents(forml::Predicate)/]" domainClass="forml.Predicate">
            <style xsi:type="style:BundledImageDescription" labelExpression="service:getConstraintsText()" labelAlignment="LEFT" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" labelSize="11" showIcon="false" labelExpression="['Constraints'/]" widthComputationExpression="20" heightComputationExpression="20" backgroundStyle="Liquid">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_orange']"/>
          </style>
        </containerMappings>
        <toolSections name="Constraints">
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createConstraintsContainer" label="Constraints" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Constraints']/@containerMappings[name='FCConstraintsContainer']">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[container/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Constraint" referenceName="constraints" variableName="constInstance"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteConstraints">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:For" expression="[containerView.target/]"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool:ExternalJavaAction" name="OpenEmbeddedEditorforConstraints" label="Open Constraints Editor" precondition="[thisEObject.oclIsTypeOf(forml::Constraint)/]" id="uw.cs.watform.forml.extensions.Ext_OpenEmbeddedEditor"/>
          <ownedTools xsi:type="tool_1:DoubleClickDescription" name="OpenConstraintsEditor" label="Open Constraints Editor" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Constraints']/@containerMappings[name='FCConstraintsContainer']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[element.oclAsType(forml::Constraint)/]">
                <subModelOperations xsi:type="tool:ExternalJavaActionCall" name="dbl_OpenEmbeddedEditorforConstraints" action="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']/@additionalLayers[name='Constraints']/@toolSections.1/@ownedTools[name='OpenEmbeddedEditorforConstraints']"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </additionalLayers>
      <additionalLayers name="Enums" activeByDefault="true">
        <containerMappings name="enumClassContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Enums']/@toolSections.1/@ownedTools[name='deleteEnum']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Enums']/@toolSections.1/@ownedTools[name='EditEnumName']" domainClass="forml.Enumeration" childrenPresentation="List">
          <subNodeMappings name="EnumItemsNode" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Enums']/@toolSections.1/@ownedTools[name='EditEnumCons']" semanticCandidatesExpression="feature:constant" domainClass="forml.EnumConst">
            <style xsi:type="style:WorkspaceImageDescription" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_EnumConst.gif" labelAlignment="LEFT" sizeComputationExpression="-1" labelPosition="node" resizeKind="NSEW">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </style>
          </subNodeMappings>
          <style xsi:type="style:FlatContainerStyleDescription" arcWidth="3" arcHeight="3" borderSizeComputationExpression="1" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Enum.gif" roundedCorner="true" backgroundStyle="Liquid">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_green']"/>
          </style>
        </containerMappings>
        <toolSections name="EnumClassToolSection" label="Enumeration">
          <ownedTools xsi:type="tool_1:ContainerCreationDescription" name="createEnumContainer" label="Enumeration" forceRefresh="true" containerMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Enums']/@containerMappings[name='enumClassContainer']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Enum.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[container/]">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Enumeration" referenceName="concepts" variableName="enumInstance">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:populateEnumName()"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:NodeCreationDescription" name="enumConstantNodeCreate" label="Enum Constant" nodeMappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@additionalLayers[name='Enums']/@containerMappings[name='enumClassContainer']/@subNodeMappings[name='EnumItemsNode']" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_EnumConst.gif">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createEnumConstant()"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
        <toolSections name="Actions">
          <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteEnum">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[element/]">
                <subModelOperations xsi:type="tool:For" expression="[element.eInverse(forml::AttributeType)/]" iteratorName="refAttTypes">
                  <subModelOperations xsi:type="tool:RemoveElement"/>
                </subModelOperations>
                <subModelOperations xsi:type="tool:RemoveElement"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditEnumName" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Rename_Enum(0)"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool_1:DirectEditLabel" name="EditEnumCons" forceRefresh="true">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:Rename_EnumCons(0)"/>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </additionalLayers>
      <additionalLayers name="SPL" label="SPL Class" activeByDefault="true">
        <containerMappings name="SPLClassContainer" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='deleteReferencedElements']" labelDirectEdit="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureClasses_Diagram']/@defaultLayer/@toolSections.2/@ownedTools[name='EditFeatureName']" domainClass="forml.SPL" childrenPresentation="VerticalStack">
          <style xsi:type="style:FlatContainerStyleDescription" arcWidth="12" arcHeight="12" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='_CAP_Class_Border_Brown']" borderLineStyle="dash" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureClass.gif" roundedCorner="true" backgroundStyle="Liquid">
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_blue']"/>
          </style>
        </containerMappings>
      </additionalLayers>
    </ownedRepresentations>
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="DashBoard_Diagram" label="Dash Board" titleExpression="['DashBoard'/]" initialisation="true" showOnStartup="true" domainClass="forml.System" preconditionExpression="service:doesDashboardNotExist" enablePopupBars="true">
      <metamodel href="../../uw.cs.watform.forml/model/generated/Forml.ecore#/"/>
      <validationSet name="DashBoardValidation"/>
      <diagramInitialisation>
        <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
          <subModelOperations xsi:type="tool:If" conditionExpression="[thisEObject.oclAsType(forml::System).worldmodel->size()=0/]">
            <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
              <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.WorldModel" referenceName="worldmodel" variableName="WMInstance">
                <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.Constraint" referenceName="constraints" variableName="consInstance"/>
              </subModelOperations>
            </subModelOperations>
          </subModelOperations>
          <subModelOperations xsi:type="tool:If" conditionExpression="[thisEObject.oclAsType(forml::System).behaviourmodel->size()=0/]">
            <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[thisEObject/]">
              <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.BehaviourModel" referenceName="behaviourmodel" variableName="BMInstance"/>
            </subModelOperations>
          </subModelOperations>
        </firstModelOperations>
      </diagramInitialisation>
      <defaultLayer name="Default">
        <containerMappings name="DA_Dashboard" semanticCandidatesExpression="var:self" domainClass="forml::System" childrenPresentation="HorizontalStack">
          <subContainerMappings name="DA_Create" semanticCandidatesExpression="var:self" domainClass="forml.System" childrenPresentation="List">
            <subNodeMappings name="DA_Feature Model Diagram" label="Create Feature Model Diagram" preconditionExpression="service:isFeatureModelRepresentationCreated()" semanticCandidatesExpression="var:self" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Create']/@ownedTools[name='CreateFeatureModelDiagram']" domainClass="forml::System">
              <style xsi:type="style:BundledImageDescription" labelSize="10" labelExpression="Feature Model Diagram" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModel.gif" labelAlignment="LEFT" tooltipExpression="Double click to create a new class diagram" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_FeatureClassDiagram" label="Create Class Diagram" preconditionExpression="service:isClassDiagramRepresentationCreated()" semanticCandidatesExpression="var:self" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Create']/@ownedTools[name='CreateClassDiagram']" domainClass="forml.System">
              <style xsi:type="style:BundledImageDescription" labelSize="10" labelExpression="Feature/Entities Class Diagram" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_ClassDiagram.gif" labelAlignment="LEFT" tooltipExpression="Double click to create a new component diagram" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_FeatureModuleDiagram" label="Create Feature Module Diagram" semanticCandidatesExpression="var:self" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Create']/@ownedTools[name='CreateFeatureModule']" domainClass="forml.System">
              <style xsi:type="style:BundledImageDescription" labelSize="10" labelExpression="Feature Module Diagram" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" labelAlignment="LEFT" tooltipExpression="Double click to create a new state machine diagram" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_FragmentFeatureModule" label="Create Fragment Module Diagram" preconditionExpression="[false/]" semanticCandidatesExpression="var:self" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Create']/@ownedTools[name='CreateFragmentFeatureModule']" domainClass="forml.System">
              <style xsi:type="style:BundledImageDescription" labelSize="10" labelExpression="Fragment Module Diagram" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif" labelAlignment="LEFT" tooltipExpression="Double click to create a new state machine diagram" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='dark%20lagune']" labelSize="12" showIcon="false" labelExpression="Create" tooltipExpression="Create new fine-grained structural diagrams and behavioral diagrams" roundedCorner="true" widthComputationExpression="40" heightComputationExpression="25" backgroundStyle="Liquid" backgroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </subContainerMappings>
          <subContainerMappings name="DA_Navigate" semanticCandidatesExpression="var:self" domainClass="forml.System" childrenPresentation="List">
            <subNodeMappings name="DA_Representation_FeatureModel" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='deleteDiagramRepresentations']" semanticCandidatesExpression="service:getRepresentationsForFeatureModel()" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='DA_NavigateToExistingRepresentation']" domainClass="viewpoint.DRepresentation">
              <style xsi:type="style:BundledImageDescription" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModel.gif" labelAlignment="LEFT" tooltipExpression="Double click to open the current diagram" sizeComputationExpression="6" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_Representation_FeatureEntitiesClass" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='deleteDiagramRepresentations']" semanticCandidatesExpression="service:getRepresentationsForFeatureClassDiagram()" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='DA_NavigateToExistingRepresentation']" domainClass="viewpoint.DRepresentation">
              <style xsi:type="style:BundledImageDescription" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_ClassDiagram.gif" labelAlignment="LEFT" tooltipExpression="Double click to open the current diagram" sizeComputationExpression="6" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_Representation_FeatureModules" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='deleteDiagramRepresentations']" semanticCandidatesExpression="service:getRepresentationsForFeatureModulesSortedbyName()" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='DA_NavigateToExistingRepresentation']" domainClass="viewpoint.DRepresentation">
              <style xsi:type="style:BundledImageDescription" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_StateMachine.gif" labelAlignment="LEFT" tooltipExpression="Double click to open the current diagram" sizeComputationExpression="6" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_Representation_FragmentModules" deletionDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='deleteDiagramRepresentations']" semanticCandidatesExpression="service:getRepresentationsForFragmentDiagram()" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Navigate']/@ownedTools[name='DA_NavigateToExistingRepresentation']" domainClass="viewpoint.DRepresentation">
              <style xsi:type="style:BundledImageDescription" labelSize="10" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif" labelAlignment="LEFT" tooltipExpression="Double click to open the current diagram" sizeComputationExpression="6" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='dark%20lagune']" labelSize="12" showIcon="false" labelExpression="Navigate" tooltipExpression="Open existing diagrams" roundedCorner="true" widthComputationExpression="40" heightComputationExpression="25" backgroundStyle="Liquid" backgroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </subContainerMappings>
          <subContainerMappings name="DA_Model" semanticCandidatesExpression="var:self" domainClass="forml.System" childrenPresentation="List">
            <subNodeMappings name="DA_ShowModel" semanticCandidatesExpression="var:self" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Model']/@ownedTools[name='DA_NavigateToModelEditor']" domainClass="forml.System">
              <style xsi:type="style:BundledImageDescription" labelSize="10" labelExpression="Open Textual Model Editor" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif" labelAlignment="LEFT" tooltipExpression="Double click to open the textual model" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <subNodeMappings name="DA_ExportModel" semanticCandidatesExpression="var:self" doubleClickDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@toolSections.0/@subSections[name='Model']/@ownedTools[name='ExportXML']" domainClass="forml.System">
              <style xsi:type="style:BundledImageDescription" labelSize="10" labelExpression="Export to XML" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_FeatureModule.gif" labelAlignment="LEFT" tooltipExpression="Double click to export the model to XML/XMI" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='dark%20lagune']" labelSize="12" showIcon="false" labelExpression="Model" roundedCorner="true" widthComputationExpression="25" heightComputationExpression="25" backgroundStyle="Liquid" backgroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']">
              <labelFormat>bold</labelFormat>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </subContainerMappings>
          <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" borderColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='dark%20lagune']" labelSize="12" labelExpression="Dashboard" iconPath="/uw.cs.watform.forml.odesign/images/Icons/icon_Dashboard.gif" tooltipExpression="Dashboard" roundedCorner="true" backgroundStyle="Liquid" backgroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']" foregroundColor="//@userColorsPalettes[name='FORMLPalette']/@entries[name='light%20lagune']">
            <labelFormat>bold</labelFormat>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </containerMappings>
        <toolSections name="Tools">
          <subSections name="Create">
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="CreateFeatureModelDiagram" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Create']/@subNodeMappings[name='DA_Feature%20Model%20Diagram']">
              <element name="element"/>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                  <subModelOperations xsi:type="tool:Switch">
                    <cases conditionExpression="[element.oclAsType(forml::System).worldmodel->size()=0/]">
                      <subModelOperations xsi:type="tool:CreateInstance" typeName="forml.WorldModel" referenceName="worldmodel" variableName="WMInstance">
                        <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:WMInstance">
                          <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']"/>
                        </subModelOperations>
                      </subModelOperations>
                    </cases>
                    <default>
                      <subModelOperations xsi:type="tool:ChangeContext" browseExpression="[element.oclAsType(forml::System).worldmodel/]">
                        <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='WorldModel_FeatureModel_Diagram']"/>
                      </subModelOperations>
                    </default>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </ownedTools>
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="CreateClassDiagram" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Create']/@subNodeMappings[name='DA_FeatureClassDiagram']">
              <element name="element"/>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createClassDiagram"/>
              </initialOperation>
            </ownedTools>
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="CreateFeatureModule" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Create']/@subNodeMappings[name='DA_FeatureModuleDiagram']">
              <element name="element">
                <subVariables xsi:type="tool:SelectModelElementVariable" name="SelectedFeature" candidatesExpression="service:getAllFeaturesWithoutFeatureModule()" message="Select the containing feature"/>
              </element>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:SelectedFeature">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createFeatureModule()">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </ownedTools>
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="CreateFragmentFeatureModule" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Create']/@subNodeMappings[name='DA_FragmentFeatureModule']">
              <element name="element">
                <subVariables xsi:type="tool:SelectModelElementVariable" name="SelectedFeature" candidatesExpression="service:getAllFeaturesWithoutFeatureModule()" message="Select the containing feature"/>
              </element>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:SelectedFeature">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:createFeatureModule()">
                    <subModelOperations xsi:type="tool_1:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='FeatureModule_Diagram']"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </ownedTools>
          </subSections>
          <subSections name="Navigate">
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="DA_NavigateToExistingRepresentation" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Navigate']/@subNodeMappings[name='DA_Representation_FeatureModel'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Navigate']/@subNodeMappings[name='DA_Representation_FeatureEntitiesClass'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Navigate']/@subNodeMappings[name='DA_Representation_FeatureModules'] //@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Navigate']/@subNodeMappings[name='DA_Representation_FragmentModules']">
              <element name="element"/>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openRepresentation"/>
                </firstModelOperations>
              </initialOperation>
            </ownedTools>
            <ownedTools xsi:type="tool_1:DeleteElementDescription" name="deleteDiagramRepresentations">
              <element name="element"/>
              <elementView name="elementView"/>
              <containerView name="containerView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:If" conditionExpression="service:deleteRepresentation()">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                    <subModelOperations xsi:type="tool:RemoveElement"/>
                  </subModelOperations>
                </firstModelOperations>
              </initialOperation>
            </ownedTools>
          </subSections>
          <subSections name="Model">
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="DA_NavigateToModelEditor" label="Navigate To Model Editor" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Model']/@subNodeMappings[name='DA_ShowModel']">
              <element name="element"/>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openTextEditor()"/>
                </firstModelOperations>
              </initialOperation>
            </ownedTools>
            <ownedTools xsi:type="tool_1:DoubleClickDescription" name="ExportXML" mappings="//@ownedViewpoints[name='Design']/@ownedRepresentations[name='DashBoard_Diagram']/@defaultLayer/@containerMappings[name='DA_Dashboard']/@subContainerMappings[name='DA_Model']/@subNodeMappings[name='DA_ExportModel']">
              <element name="element"/>
              <elementView name="elementView"/>
              <initialOperation>
                <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="service:exportModelToXMI()"/>
              </initialOperation>
            </ownedTools>
          </subSections>
        </toolSections>
      </defaultLayer>
    </ownedRepresentations>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_TransitionLabelServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_FeatureModelServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_FeatureClassServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_GetTransitionsForPrioritization"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_LayoutDiagram"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_FragmentServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_DashboardServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_AssociationServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_OpenFormlDocument"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_ConstraintServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_FeatureModuleServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_AnnotationServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_MessageServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.rename.JS_Action_Rename_On_FeatureClass"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.rename.JS_Action_Rename_On_FeatureModel"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.delete.JS_Action_Delete_On_FeatureModel"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.delete.JS_Action_Delete_On_FeatureModule"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.reconnect.JS_Action_Reconnect_On_FeatureModel"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.validation.JS_ChkLikelyInvariant"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.validation.JS_ValidationFeatureModule"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.validation.JS_ValidationClassDiagram"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.validation.JS_ValidationFeatureModel"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.keyboard.JS_KeyboadListener"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.utilities.RepresentationsUtils"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.widgets.JS_TransitionWidgets"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_CrossReferenceServices"/>
    <ownedJavaExtensions qualifiedClassName="uw.cs.watform.forml.services.general.JS_GeneralServices"/>
  </ownedViewpoints>
  <userColorsPalettes name="FORMLPalette">
    <entries xsi:type="description:UserFixedColor" red="230" green="230" blue="230" name="StateMachineBackGround"/>
    <entries xsi:type="description:UserFixedColor" red="110" green="132" blue="132" name="dark lagune"/>
    <entries xsi:type="description:UserFixedColor" red="238" green="249" blue="244" name="light lagune"/>
    <entries xsi:type="description:ComputedColor" name="SimpleStateColor" red="200" green="220" blue="255"/>
    <entries xsi:type="description:UserFixedColor" red="141" green="252" blue="207" name="SPLNodeBackGround"/>
    <entries xsi:type="description:UserFixedColor" red="254" green="231" blue="152" name="FeatureNodeBackGround"/>
    <entries xsi:type="description:UserFixedColor" red="214" green="242" blue="252" name="SPLClassBackGround"/>
    <entries xsi:type="description:UserFixedColor" red="123" green="105" blue="79" name="_CAP_Class_Border_Brown"/>
    <entries xsi:type="description:UserFixedColor" red="232" green="224" blue="210" name="_CAP_FeatureClass_Brown"/>
    <entries xsi:type="description:UserFixedColor" red="234" green="219" blue="228" name="_CAP_EntityClass_Brown"/>
    <entries xsi:type="description:UserFixedColor" red="160" green="207" blue="222" name="OrFeatureNodeBackGround"/>
    <entries xsi:type="description:UserFixedColor" red="211" green="190" blue="184" name="AndFeatureNodeBackGround"/>
    <entries xsi:type="description:UserFixedColor" red="184" green="228" blue="186" name="XorFeatureNodeBackGround"/>
  </userColorsPalettes>
  <extensions xsi:type="properties:ViewExtensionDescription" name="CustomPropertiesView">
    <categories name="CustomWidgetsCategory">
      <pages name="General Page" groups="//@extensions.0/@categories.0/@groups.0">
        <actions tooltipExpression="Open Textual Model Editor" imageExpression="/uw.cs.watform.forml.odesign/images/Icons/icon_textualeditor.png">
          <initialOperation>
            <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:self">
              <subModelOperations xsi:type="tool:ChangeContext" browseExpression="service:openTextEditor()"/>
            </firstModelOperations>
          </initialOperation>
        </actions>
        <extends href="platform:/plugin/org.eclipse.sirius.properties.defaultrules/model/properties.odesign#//@extensions.0/@categories.0/@pages.0"/>
      </pages>
      <pages name="StateMachinePreviewerPageInClassDiagram" labelExpression="State-Machine Preview" domainClass="forml::Roleable" semanticCandidateExpression="service:GetRoleable()" preconditionExpression="service:isFeatureModuleExists()" groups="//@extensions.0/@categories.0/@groups.2"/>
      <pages name="CrossReferencesViewerPage" labelExpression="Cross-References Viewer" domainClass="EObject" preconditionExpression="service:hasCrossReferences()" groups="//@extensions.0/@categories.0/@groups.1"/>
      <pages name="FeatureModelPreviewerPage" labelExpression="Feature-Tree Preview" domainClass="forml::Feature" semanticCandidateExpression="var:self" groups="//@extensions.0/@categories.0/@groups.3"/>
      <pages name="ClassPreviewerPageForFeatureModule" labelExpression="Class Preview" domainClass="forml::FeatureModule" semanticCandidateExpression="var:self" groups="//@extensions.0/@categories.0/@groups.4"/>
      <pages name="StateMachinePreviewerPageInFeatureModelDiagram" labelExpression="State-Machine Preview" domainClass="forml::FeatureNode" semanticCandidateExpression="service:GetRoleable()" preconditionExpression="service:isFeatureModuleExists()" groups="//@extensions.0/@categories.0/@groups.2"/>
      <pages name="StateMachinePreviewerPageForFragmentedState" labelExpression="State-Machine Preview" domainClass="forml::State" semanticCandidateExpression="service:GetRoleable()" preconditionExpression="service:isFeatureModuleExists()" groups="//@extensions.0/@categories.0/@groups.2"/>
      <pages name="ClassPreviewerPageForState" labelExpression="Class Preview" domainClass="forml::State" semanticCandidateExpression="var:self" groups="//@extensions.0/@categories.0/@groups.5"/>
      <pages name="ClassPreviewerPageForTransition" labelExpression="Class Preview" domainClass="forml::Transition" semanticCandidateExpression="var:self" groups="//@extensions.0/@categories.0/@groups.6"/>
      <groups name="Transition" labelExpression="Transition" domainClass="forml::Transition" semanticCandidateExpression="var:self">
        <controls xsi:type="properties:ContainerDescription">
          <controls xsi:type="properties:LabelDescription" name="lblKeyCombinations" labelExpression="Press Ctrl+Space for Content Assist, and Shift+Enter to save the modifications."/>
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.lblSaveStatus" isEnabledExpression="aql:false"/>
          <layout xsi:type="properties:GridLayoutDescription" numberOfColumns="2"/>
        </controls>
        <controls xsi:type="properties:ContainerDescription" name="TriggringEventButtonsContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.EventEditor" labelExpression="Event" isEnabledExpression="aql:true"/>
        </controls>
        <controls xsi:type="properties:ContainerDescription" name="GuardButtonsContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.GuardEditor" labelExpression="Guard" isEnabledExpression="aql:true"/>
        </controls>
        <controls xsi:type="properties:ContainerDescription" name="ActionButtonsContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.ActionEditor" labelExpression="Action" isEnabledExpression="aql:true"/>
        </controls>
      </groups>
      <groups name="ClassDiagram" domainClass="EObject">
        <controls xsi:type="properties:ContainerDescription" name="CrossReferencesContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.CrossRefsViewer" isEnabledExpression="aql:true"/>
          <layout xsi:type="properties:FillLayoutDescription" orientation="HORIZONTAL"/>
        </controls>
      </groups>
      <groups name="StateDiagram" domainClass="forml::Roleable" semanticCandidateExpression="var:self" preconditionExpression="service:isFeatureModuleExists()">
        <controls xsi:type="properties:ContainerDescription" name="StateDiagramContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.StateMachinePreviewer" isEnabledExpression="aql:true"/>
          <layout xsi:type="properties:GridLayoutDescription"/>
        </controls>
      </groups>
      <groups name="FeatureModel" domainClass="forml::Feature" semanticCandidateExpression="var:self">
        <controls xsi:type="properties:ContainerDescription" name="FeatureTreeContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.FeatureTreePreviewer" isEnabledExpression="aql:true"/>
          <layout xsi:type="properties:GridLayoutDescription"/>
        </controls>
      </groups>
      <groups name="FeatureModuleRelatedClass" domainClass="forml::FeatureModule" semanticCandidateExpression="var:self">
        <controls xsi:type="properties:ContainerDescription" name="RelatedClassContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.ClassContainerForFeatureModule" isEnabledExpression="aql:true"/>
          <layout xsi:type="properties:GridLayoutDescription"/>
        </controls>
      </groups>
      <groups name="StateRelatedClass" domainClass="forml::State" semanticCandidateExpression="var:self">
        <controls xsi:type="properties:ContainerDescription" name="RelatedClassContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.ClassContainerForState" isEnabledExpression="aql:true"/>
          <layout xsi:type="properties:GridLayoutDescription"/>
        </controls>
      </groups>
      <groups name="TransitionRelatedClass" domainClass="forml::Transition" semanticCandidateExpression="var:self">
        <controls xsi:type="properties:ContainerDescription" name="RelatedClassContainer">
          <controls xsi:type="properties:CustomDescription" name="uw.cs.watform.forml.ext.widgets.ClassContainerForTransition" isEnabledExpression="aql:true"/>
          <layout xsi:type="properties:GridLayoutDescription"/>
        </controls>
      </groups>
    </categories>
  </extensions>
</description:Group>
